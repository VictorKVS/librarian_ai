

# 📁 librarian_ai — структура проекта (Windows)

librarian_ai/
├── README.md                    # ✅ 📘 Главная документация проекта, цели, установка, примеры использования
├── alembic.ini                  # ✅ ⚙️ Конфигурация Alembic (путь к env.py, URL базы данных)
├── api/                         # ✅  🔧 🌐 API-интерфейсы
│   └── documents.py             # ✅ Эндпоинты для работы с документами (FastAPI)
├── cli/                         # 🔧 🖥️ CLI-интерфейс
│   └── [будет добавлено]        # ❌ Поддержка команд: ingest, reset, migrate, search
│
├── core/                        # 🔧 🧩 Ядро обработки
│   ├──  processing/              # ✅
             ner.py
│   ├── tasks/                   # ✅ Фоновые задачи
│   │   └── async_tasks.py       # ✅ Celery задачи для обработки и индексации
│   ├── text_processing/         # ✅ Обработка текста
│   │   └── chunker.py           # ✅ Логика чанкинга текста и генерации эмбеддингов
│   └──  tools/                        # 🧰 Вспомогательные и аналитические модули
│         ├── __init__.py               # ✅ Инициализация пакета
│         ├── embedder.py               # ✅ Генерация эмбеддингов: HuggingFace, OpenAI, SentenceTransformers
│         ├── loader.py                 # ✅ Универсальный загрузчик: определяет тип файла, извлекает сырой текст
│         ├── semantic_search.py        # ✅ Поиск по векторным индексам (FAISS, pgvector), ранжирование
│         ├── extractor.py              # ✅ Извлечение сущностей: NER, метки, категории
│         ├── graph_tools.py            # ✅ Построение и визуализация графов знаний (узлы, ребра, связи)
│         ├── summary_generator.py      # ✅ Автоматическое сжатие текста: резюме, TL;DR, план
│         ├── crypto_utils.py           # ⏳ Шифрование, дешифрование, генерация ключей (AES, GOST)
│         ├── signature_engine.py       # ⏳ Цифровая подпись, проверка, сериализация документов
│         ├── integrity_checker.py      # ⏳ Контроль целостности: хеширование, проверка изменений
│         ├── secure_channel.py         # ⏳ Имитация защищённого канала передачи данных (ECC, TLS-light)
│         ├── key_store.py              # ⏳ Хранение и управление криптоключами (в памяти / файлах)
│         └── async_tasks.py            # ❌ (Удалить или объединить с core/tasks/async_tasks.py — дублируется)
│
├── db/                          # ✅ 🗃️ Работа с базой данных и моделями
│   ├── alembic/                 # ✅ Alembic: управление миграциями
│   │   ├── versions/            # ✅ Каталог автосгенерированных миграций
│   │   │     ├──
│   │   ├── env.py               # ✅ Скрипт Alembic, связывает metadata и URL
│   │   └── script.py.mako       # ✅ Шаблон генерации миграций
│   │
│   ├── __init__.py              # ✅ Инициализация пакета db
│   ├── create_tables.py         # ✅ Скрипт для создания всех таблиц из моделей вручную
│   ├── models.py                # ✅ SQLAlchemy ORM-модели: документы, чанки, сущности и связи
│   ├── schemas.py               # ✅ Pydantic-схемы для валидации данных (Document, Chunk, Entity, Graph)
│   ├── session.py               # ✅ Асинхронное подключение к БД через SQLAlchemy
│   └── storage.py               # ✅ Унифицированный интерфейс к FAISS, pgvector и гибридному хранилищу
│
├── docs/                        # ✅ 📚 Документация и план развития
│   └── roadmap.md               # ✅ План развития проекта по этапам
│
├── examples/                    # ✅ Примеры запуска, использования и демонстрации
│     ├──un_entity_extraction.
│     └──pyrun_graph_builder.py
│
│
├── inference/                   # ⏳ Инференс моделей, генерация, поиск ответов и т.п.
│
├── ingest/                      # ✅ 📥 Модули загрузки и первичной обработки
│   ├── chunker.py               # ✅ Деление текста на семантические чанки
│   ├── loader.py                # ✅ Загрузка документов из файлов, папок, URL, API
│   ├── parser.py                # ✅ Универсальный парсер текстов (PDF, DOCX, HTML, Markdown и т.п.)
│   ├── async_tasks.py           # ⏳ Фоновые задачи обработки (Celery)
│   └── ingest_and_index.py      # ⏳ Скрипт запуска всего пайплайна загрузки и индексации
│
├── processing/                  # 🔧 🧠 Модули смысловой обработки
│   └── [будет добавлено]        # ❌ Извлечение сущностей (NER), построение графа знаний, связи
│
├──prompt_templates/
│     ├── main_prompt.j2            # ✅
│     └── custom_role_prompt.j2     # ✅
│
├── scripts/                     # 🔧 🛠️ Скрипты администрирования и интеграции
│   └── ingest_and_index.py      # ✅ Ручной запуск пайплайна загрузки и индексации
│
├── storage/                     # 🔧 🔎 Слои векторных хранилищ
│   ├── faiss_index.py           # ⏳ FAISS backend: хранение и поиск векторов локально
│   ├── pgvector_store.py        # ⏳ PostgreSQL + pgvector backend: хранение в БД
│   └── [будет добавлено]        # ⏳ Расширения, кэширование, облачные backend-и
│
├── tests/                       # 🔧 ✅ Модульные и интеграционные тесты
│     └── test_data/                               # ✅
│     │       ├──osint/                            # ✅
│     │       │     ├──index.json                  # ✅
│     │       │     ├── metadata.csv                #  ✅
│     │       │     ├── sample_belova.txt          # ✅
│     │       │     ├── sample_hacker.txt          # ✅
│     │       │     ├── sample_kovalev.txt         # ✅
│     │       │     ├── sample_network_sidorov.txt  # ✅
│     │       │     ├── sample_petrov.txt           # ✅   
│     │       │     └── sample_petrov_marina.txt   # ✅               
│     │       ├── computers.txt                    # ✅
│     │       ├── humans.txt                       # ✅ 
│     │       └── sample_humans.txt                # ✅ 
│     │
│     ├── test_loader.py                            # ✅
│     ├── test_chunker.py                           # ✅
│     ├── test_metadata_parsing.py                  # ✅  
│     └── test_summary_generator.py                 # ✅
│   
├── utils/                       # ✅ 🔧 Вспомогательные модули и конфигурация
│   ├── config.py                # ⏳ Pydantic-настройки проекта: пути, API ключи, базы, переменные
│   └── logging.py               # ⏳ Инициализация и настройка логгера (формат, уровни, вывод)

# Дополнительно (опционально):
# ├── requirements.txt           # ⏳ Зависимости проекта
# ├── .env                       # ⏳ Переменные окружения (не добавлять в git!)
# └── Dockerfile / docker-compose.yml  # ⏳ Контейнеризация и деплой




librarian_ai/
├── README.md                    # 📘 Главная документация проекта, цели, установка, примеры использования
├── alembic.ini                  # ⚙️ Конфигурация Alembic (путь к env.py, URL базы данных)
│
├── db/                         # 🗃️ Работа с базой данных и моделями
│   ├── __init__.py              # Инициализация пакета db
│   ├── create_tables.py         # Скрипт для создания всех таблиц из моделей вручную
│   ├── models.py                # SQLAlchemy ORM-модели: документы, чанки, сущности и связи
│   ├── schemas.py               # Pydantic-схемы для валидации данных (Document, Chunk, Entity, Graph)
│   ├── session.py               # Асинхронное подключение к БД через SQLAlchemy
│   ├── storage.py               # Унифицированный интерфейс к FAISS, pgvector и гибридному хранилищу
│   └── alembic/                # Alembic: управление миграциями
│       ├── env.py               # Скрипт Alembic, связывает metadata и URL
│       ├── script.py.mako       # Шаблон генерации миграций
│       └── versions/            # Каталог автосгенерированных миграций
│
├── ingest/                     # 📥 Модули загрузки и первичной обработки
│   ├── loader.py               # Загрузка документов из файлов, папок, URL, API
│   ├── parser.py               # Универсальный парсер текстов (PDF, DOCX, HTML, Markdown и т.п.)
│   ├── chunker.py              # Деление текста на семантические чанки
│   ├── async_tasks.py          # Фоновые задачи обработки (Celery)
│   └── ingest_and_index.py     # Скрипт запуска всего пайплайна загрузки и индексации
│
├── processing/                 # 🧠 Модули смысловой обработки
│   └── [будет добавлено]       # Извлечение сущностей (NER), построение графа знаний, связи
│
├── storage/                    # 🔎 Слои векторных хранилищ
│   ├── faiss_index.py          # FAISS backend: хранение и поиск векторов локально
│   ├── pgvector_store.py       # PostgreSQL + pgvector backend: хранение в БД
│   └── [будет добавлено]       # Расширения, кэширование, облачные backend-и
│
├── scripts/                    # 🛠️ Скрипты администрирования и интеграции
│   └── [будет добавлено]       # Очистка, миграции, тестовые загрузки
│
├── cli/                        # 🖥️ CLI-интерфейс
│   └── [будет добавлено]       # Поддержка команд: ingest, reset, migrate, search
│
├── api/                        # 🌐 API-интерфейсы
│   └── [будет добавлено]       # FastAPI endpoints, Telegram API, REST для бэкенда
│
├── tests/                      # ✅ Модульные и интеграционные тесты
│   └── [будет добавлено]       # Pytest тесты для моделей, парсинга, хранилищ и API
│
├── utils/                      # 🔧 Вспомогательные модули и конфигурация
│   ├── config.py               # Pydantic-настройки проекта: пути, API ключи, базы, переменные
│   └── logging.py              # Инициализация и настройка логгера (формат, уровни, вывод)

# Дополнительно (опционально):
# ├── requirements.txt          # Зависимости проекта
# ├── .env                      # Переменные окружения (не добавлять в git!)
# └── Dockerfile / docker-compose.yml  # Контейнеризация и деплой

Проверь, что установлены нужные пакеты
Убедись, что установлены:

b